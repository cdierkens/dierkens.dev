---
import { getCollection } from "astro:content";
import BaseHead from "../../components/BaseHead.astro";
import BlogList from "../../components/BlogList.astro";
import Body from "../../components/Body.astro";
import Footer from "../../components/Footer.astro";
import Header from "../../components/Header.astro";
import Html from "../../components/Html.astro";
import Main from "../../components/Main.astro";
import { SITE_DESCRIPTION, SITE_TITLE } from "../../consts";

const posts = (await getCollection("blog")).sort(
  (a, b) => b.data.pubDate.valueOf() - a.data.pubDate.valueOf()
);
---

<!doctype html>
<Html>
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <Body>
    <Header />
    <Main>
      <h1>Blog</h1>
      <p>I write about the technology I use to ship software.</p>
      <hr />
      <section>
        <BlogList posts={posts} />
      </section>
    </Main>
    <Footer />
  </Body>
</Html>
